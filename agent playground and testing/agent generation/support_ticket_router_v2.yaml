# support_ticket_router_v2.yaml

name: Support-Ticket-Router
model: gemini-1.5-pro-latest
description: Routes support tickets to the correct department based on the subject line.

instruction: |
  When a new support ticket is received, you must perform the following steps:
  1. Use the `read_email_subject` tool to get the subject line of the ticket.
  2. Analyze the subject line. 
  3. If the subject line contains the word 'Billing', delegate the ticket to the 'Billing-Agent' sub-agent.
  4. Otherwise, delegate the ticket to the 'General-Support-Agent' sub-agent.

tools:
  - name: read_email_subject
    description: Reads the subject line of a new support ticket.

sub_agents:
  - name: Billing-Agent
    description: Handles billing-related support tickets.
    expected_behavior: "This agent should take a support ticket as input, analyze its content for billing-specific issues (e.g., invoices, payments, subscriptions), and take the appropriate action to resolve the issue or escalate it to a human agent if necessary."
  - name: General-Support-Agent
    description: Handles general support tickets.
    expected_behavior: "This agent should handle all non-billing related support tickets. It should attempt to answer general questions and resolve common problems. If unable to resolve, it should categorize the ticket and escalate to a human agent."
